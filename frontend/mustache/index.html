<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
	</head>
	<body>
        <div id="output"></div>
        <script src="ejs.min.js"></script>
        <script>
            var data = [
                {
                    name: 'Jim',
                    age: '12',
                    sex: '1'
                },
                {
                    name: 'Lily',
                    age: '11',
                    sex: '0'
                },
                {
                    name: 'Lucy',
                    age: '11',
                    sex: '0'
                }
            ];

            var util = {
                sex: function(a) {
                    return (a.sex === '1') ? 'he is a boy' : 'she is a girl';
                }
            }
            var tpl = '<ul>' + 
                      '<% for (var i = 0; i < data.length; i++) { %>' + 
                          '<li><%= data[i].name + " is " + data[i].age + ", " + util.sex(data[i]) %></li>' +
                      '<% } %>' +
                      '</ul>';
            var html = ejs.render(tpl, {data: data, util: util});
            document.getElementById('output').innerHTML = html;
        </script>
	</body>
</html>

